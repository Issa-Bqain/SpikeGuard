MyScreenManager:

<MyScreenManager>:
    canvas.before:
        Color:
            rgb: 245/255, 243/255, 244/255
        Rectangle:
            pos: self.pos
            size: self.size
    Screen:
        name: "connect"
        BoxLayout:
            orientation: "vertical"

            BoxLayout:
                padding: ("40dp", "50dp", "40dp", "40dp")
                spacing: "40dp"
                orientation: "vertical"

                Label:
                    font_size: "72dp"
                    text_size: self.width, None
                    halign: "center"
                    markup: True
                    text: '[color=000000]VICI[/color]'
                    font_name: "fonts/Gothic/GothicA1-Light.ttf"
                    size_hint_y: 0.5

                RoundedLabel:
                    font_size: "20dp"
                    text_size: self.width * 0.9, None
                    halign: "center"
                    text: root.connect_status

                RoundedToggle:
                    size_hint: 1, .3
                    font_size: "20dp"
                    text_size: self.width, None
                    halign: "center"
                    text: root.connect_button_text
                    on_state: app.connect_to_mqtt(self)


            BoxLayout:
                canvas.before:
                    Color:
                        rgb: 177/255, 167/255, 166/255
                    Rectangle:
                        pos: self.pos
                        size: self.size
                orientation: "horizontal"
                size_hint: 1, .1
                padding: 0,0,0,0
                spacing: 0

                NavButton:
                    on_press: root.current = "connect"

                    Image:
                        source: "images/cloud.png"
                        allow_stretch: True
                        keep_ratio: True
                        center_x: self.width and self.parent.center_x
                        center_y: self.height and self.parent.center_y
                        size_hint_y: None
                        size_hint_x: None
                        width: self.parent.width * root.connected_icon_width
                        height: self.parent.height * 0.5

                    Image:
                        source: "images/cancel.png"
                        allow_stretch: True
                        keep_ratio: True
                        center_x: self.width and self.parent.center_x
                        center_y: self.height and self.parent.center_y
                        size_hint_y: None
                        size_hint_x: None
                        width: self.parent.width * root.disconnected_icon_width
                        height: self.parent.height * 0.5

                NavButton:
                    on_press: root.transition.direction = "left"; root.current = "arm"

                    Image:
                        source: "images/shield_unprotected.png"
                        allow_stretch: True
                        keep_ratio: True
                        center_x: self.width and self.parent.center_x
                        center_y: self.height and self.parent.center_y
                        size_hint_y: None
                        size_hint_x: None
                        width: self.parent.width * root.shield_unprotected_width
                        height: self.parent.height * 0.5

                    Image:
                        source: "images/shield_protected.png"
                        allow_stretch: True
                        keep_ratio: True
                        center_x: self.width and self.parent.center_x
                        center_y: self.height and self.parent.center_y
                        size_hint_y: None
                        size_hint_x: None
                        width: self.parent.width * root.shield_protected_width
                        height: self.parent.height * 0.5

                    Image:
                        source: "images/warning.png"
                        allow_stretch: True
                        keep_ratio: True
                        center_x: self.width and self.parent.center_x
                        center_y: self.height and self.parent.center_y
                        size_hint_y: None
                        size_hint_x: None
                        width: self.parent.width * root.warning_width
                        height: self.parent.height * 0.5

                NavButton:
                    on_press: root.transition.direction = "left"; root.current = "settings"

                    Image:
                        source: "images/setting.png"
                        allow_stretch: True
                        keep_ratio: True
                        center_x: self.width and self.parent.center_x
                        center_y: self.height and self.parent.center_y
                        size_hint_y: None
                        height: self.parent.height * 0.5

    Screen:
        name: "arm"
        BoxLayout:
            orientation: "vertical"

            BoxLayout:
                padding: ("40dp", "50dp", "40dp", "40dp")
                spacing: "40dp"
                orientation: "vertical"

                Label:
                    font_size: "72dp"
                    text_size: self.width, None
                    halign: "center"
                    markup: True
                    text: '[color=000000]VICI[/color]'
                    font_name: "fonts/Gothic/GothicA1-Light.ttf"
                    size_hint_y: 0.5

                RoundedLabel:
                    font_size: "20dp"
                    text_size: self.width, None
                    halign: "center"
                    text: root.protect_status

                RoundedToggle:
                    id: arm_toggle
                    size_hint: 1, .3
                    font_size: "20dp"
                    text_size: self.width, None
                    halign: "center"
                    text: "Arm" if self.state == "normal" else "Disarm"
                    on_state: app.send_arm_message(self)
                    disabled: root.arm_button_disabled



            BoxLayout:
                canvas.before:
                    Color:
                        rgb: 177/255, 167/255, 166/255
                    Rectangle:
                        pos: self.pos
                        size: self.size
                orientation: "horizontal"
                size_hint: 1, .1
                padding: 0,0,0,0
                spacing: 0

                NavButton:
                    on_press: root.transition.direction = "right"; root.current = "connect"

                    Image:
                        source: "images/cloud.png"
                        allow_stretch: True
                        keep_ratio: True
                        center_x: self.width and self.parent.center_x
                        center_y: self.height and self.parent.center_y
                        size_hint_y: None
                        size_hint_x: None
                        width: self.parent.width * root.connected_icon_width
                        height: self.parent.height * 0.5

                    Image:
                        source: "images/cancel.png"
                        allow_stretch: True
                        keep_ratio: True
                        center_x: self.width and self.parent.center_x
                        center_y: self.height and self.parent.center_y
                        size_hint_y: None
                        size_hint_x: None
                        width: self.parent.width * root.disconnected_icon_width
                        height: self.parent.height * 0.5

                NavButton:
                    on_press: root.current = "arm"

                    Image:
                        source: "images/shield_unprotected.png"
                        allow_stretch: True
                        keep_ratio: True
                        center_x: self.width and self.parent.center_x
                        center_y: self.height and self.parent.center_y
                        size_hint_y: None
                        size_hint_x: None
                        width: self.parent.width * root.shield_unprotected_width
                        height: self.parent.height * 0.5

                    Image:
                        source: "images/shield_protected.png"
                        allow_stretch: True
                        keep_ratio: True
                        center_x: self.width and self.parent.center_x
                        center_y: self.height and self.parent.center_y
                        size_hint_y: None
                        size_hint_x: None
                        width: self.parent.width * root.shield_protected_width
                        height: self.parent.height * 0.5

                    Image:
                        source: "images/warning.png"
                        allow_stretch: True
                        keep_ratio: True
                        center_x: self.width and self.parent.center_x
                        center_y: self.height and self.parent.center_y
                        size_hint_y: None
                        size_hint_x: None
                        width: self.parent.width * root.warning_width
                        height: self.parent.height * 0.5

                NavButton:
                    on_press: root.transition.direction = "left"; root.current = "settings"

                    Image:
                        source: "images/setting.png"
                        allow_stretch: True
                        keep_ratio: True
                        center_x: self.width and self.parent.center_x
                        center_y: self.height and self.parent.center_y
                        size_hint_y: None
                        height: self.parent.height * 0.5

    Screen:
        name: "settings"
        BoxLayout:
            orientation: "vertical"

            Button:
                text: "Settings"

            BoxLayout:
                orientation: "horizontal"
                size_hint: 1, .1
                padding: 1,0,1,0
                spacing: 1

                Button:
                    text: "Connect"
                    on_press: root.transition.direction = "right"; root.current = "connect"

                Button:
                    text: "Arm"
                    on_press: root.transition.direction = "right"; root.current = "arm"

                Button:
                    text: "Settings"
                    on_press: root.current = "settings"


<RoundedButton@Button>:
    background_color: 0,0,0,0
    canvas.before:
        Color:
            rgba: (.4, .4, .4, 1) if self.state == 'normal' else (0, .7, .7, 1)
        RoundedRectangle:
            pos: self.pos
            size: self.size
            radius: [40,]

<RoundedToggle@ToggleButton>:
    background_color: 0,0,0,0
    canvas.before:
        Color:
            rgba: (249/255, 139/255, 135/255, 1) if self.state == 'normal' else (141/255, 253/255, 135/255, 1)
        RoundedRectangle:
            pos: self.pos
            size: self.size
            radius: [40,]


<RoundedLabel@Label>:
    background_color: 0,0,0,0
    color: 0, 0, 0, 1
    canvas.before:
        Color:
            rgba: (211/255, 211/255, 211/255, 1)
        RoundedRectangle:
            pos: self.pos
            size: self.size
            radius: [40,]

<NavButton@Button>:
    background_color: 0,0,0,0
    canvas.before:
        Color:
            rgba: (180/255, 180/255, 180/255, 1) if self.state == 'normal' else (211/255, 211/255, 211/255, 1)
        Rectangle:
            pos: self.pos
            size: self.size
